---
layout: post
title: Apache Cordova–Often a Good Choice and Not Only for Cross-Platform
disqus_short_name: optimizedprogrammer
disqus_url: http://optimizedprogrammer.com/blog/apache-cordova-often-a-good-choice-and-not-only-for-cross-platform
guid: http://optimizedprogrammer.com:80/blog/apache-cordova-often-a-good-choice-and-not-only-for-cross-platform
---

<p>I recently needed to create a tablet application.&nbsp; The immediate need was for iPad, but with a potential for wanting to think about Android tablets and IPhone and Android phones in the future.&nbsp; The potential for wanting to make something cross-platform had me thinking about <a href="http://xamarin.com/" target="_blank">Xamarin</a> and <a href="https://cordova.apache.org/" target="_blank">Cordova</a> from the start, but it was only a potential and I didn’t want to think about something <a href="https://en.wikipedia.org/wiki/You_aren't_gonna_need_it" target="_blank">YAGNI</a>.&nbsp; The obvious choice was to use <a href="https://developer.apple.com/swift/" target="_blank">Swift</a> and focus on getting the application delivered.&nbsp; There was something else, though, that really made me think about using Cordova: my client for this project has a team of PHP developers who don’t know Swift, Objective-C, .NET, or Java.&nbsp; They know HTML and JavaScript, though.&nbsp; Creating an application using JavaScript meant I could do a reasonable handoff upon delivery of the initial version of useful software and create a situation where I would not be a dependency in the future.&nbsp; This is a diversion from what I want to talk about in this post, but an important side-point: your job as a contract worker/consultant is not to give yourself a dependent client who will need you in the future – it is to give them something of value and to make them self-sufficient and stronger for the future.&nbsp; If you do that, your value will be clear and business will come to you and you don’t need to worry about trying to make yourself indispensable.&nbsp; It’s better to be valuable than indispensable.</p> <p><a href="http://raelyard.com/Media/OptimizedProgrammer/Windows-Live-Writer/Apache-Cordova_5166/cordova_bot_2.png"><img title="cordova_bot" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="cordova_bot" src="http://raelyard.com/Media/OptimizedProgrammer/Windows-Live-Writer/Apache-Cordova_5166/cordova_bot_thumb.png" width="427" height="480"></a></p> <p>The skills of the team in place for my client were the clear differentiator in why I decided I needed to look really closely at Cordova before deciding on my approach for the project.&nbsp; Ultimately, it was the winner and I proceeded with it.&nbsp; I have had a mostly pleasurable and rewarding experience with writing code using Cordova and have found that it works really well.&nbsp; Using the <a href="https://www.visualstudio.com/en-us/features/cordova-vs.aspx" target="_blank">Visual Studio Tools for Cordova</a> in Visual Studio 2015 was great as long as I didn’t need to test on real devices.&nbsp; The workflow there became painfully, unbearably, and unworkably slow when I was engaging device hardware and needed to see how things were working on a real device.&nbsp; Even using an emulator, though, is painfully slow if your project is configured to build for iOS.&nbsp; This is because of Apple’s licensing that requires using OS X for building iOS applications.&nbsp; Initially, my choice to have started with Visual Studio placed barriers in the path of being able to bypass Visual Studio because it set up files in a way that were not friendly with using the Cordova command line tools and <a href="https://developer.apple.com/xcode/" target="_blank">XCode</a>.&nbsp; Fortunately, the latest updates to the Visual Studio Tools for Cordova fixed this problem and had an upgrade path the updated project structures and such that made this work nicely.&nbsp; After upgrading, I was able to clone my repository on my Mac and use Bash to build and execute my application seamlessly and switch back and forth between using Windows for the things I could reasonably do there, and Mac for the majority of my work.&nbsp; All in all, I approve the Visual Studio Tools for Cordova and find it worth using.&nbsp; In retrospect, though, I may have been better off just starting from the command line in OS X and not using Visual Studio and Windows at all.&nbsp; If I have another iOS project, that will be my route, despite my preference for Windows.&nbsp; Apple has successfully put too many barriers in the way of using anything other than OS X, unfortunately.</p> <p>Developing my first application using Cordova was a suboptimal experience, as you might expect, but I learned some things along the way.&nbsp; Here are some of my lessons:</p> <ul> <li>Building for iOS using Windows and Visual Studio requires communication with a Mac – what has been done by Microsoft using the <a href="https://developer.apple.com/library/ios/technotes/tn2339/_index.html" target="_blank">XCode command line tools</a> to create a remote agent to be able to code on Windows and with a build that goes over the network to a Mac (which, in my case was on the same machine with Windows running in VMWare Fusion inside the OS X running on the machine)&nbsp; is cool, clever, and works, but it’s too slow to use for real development, especially when you’re dealing with something focused real hardware with the need to test extensively on the device (in my case, camera interaction being the heart of the functionality).</li> <li>Testing on a device can work nicely with using a remote URL for your development machine for the index.html in the Cordova application and <a href="http://livereload.com/" target="_blank">LiveReload</a>.&nbsp; <a href="http://gonzalo123.com/" target="_blank">Gonzalo Ayuso</a> has a <a href="http://gonzalo123.com/2014/07/21/testing-phonegapcordova-applications-fast-as-hell-in-the-device-with-ionic-framework/" target="_blank">fantastic post</a> about how to do this.&nbsp; His post uses Ionic, which I didn’t (though maybe I should have – it appears a lot of folks writing Cordova applications are using it).&nbsp; My modifications to what he did to do this without ionic are below.&nbsp; LiveReload is awesome and you should be using it for web development as well.&nbsp; It is more fully featured on OS X than on Windows, but works on Windows as well.</li> <li><a href="http://www.i-funbox.com/" target="_blank">iFunbox</a> is really useful for being able to view and manipulate and clear state if you are using local storage in your iOS application from your development machine on OS X and gets rid of the need for some of interacting with your target device via touch.&nbsp; It’s an enhancement to your workflow.</li> <li>There are very useful <a href="http://plugins.cordova.io/" target="_blank">plugins for Cordova</a> and they work really well.&nbsp; It’s easy to add them (especially using the Visual Studio Tools for Cordova).&nbsp; I especially like how they can be added using a GitHub repository location.&nbsp; The modularity of Cordova, using the plugin architecture is nice and makes it easy to just grab what you need.&nbsp; I used plugins for <a href="http://docs.phonegap.com/en/edge/cordova_file_file.md.html" target="_blank">file system access</a>, and for capturing <a href="https://github.com/EddyVerbruggen/VideoCapturePlus-PhoneGap-Plugin" target="_blank">photos</a> and <a href="https://github.com/EddyVerbruggen/VideoCapturePlus-PhoneGap-Plugin" target="_blank">videos</a> from the camera.</li></ul> <p>To use LiveReload, as illustrated in Gonzalo’s post, without using Ionic, I just wound up using the HTTP server built into cordova.&nbsp; From the Cordova application directory, I just issued:<br>cordova serve</p> <p>This command opens an HTTP server and shows the port it was using.&nbsp; It then serves all the platforms you have set up in the application on paths under that root server path.&nbsp; For example, if cordova serve is using port 8000, your index.html in the ios output of your application will be at: http://localhost:8000/ios/www/index.html (localhost won’t work from your iOS device, so you’ll want to use the IP address of your Mac on your LAN).</p> <p>With this in place, you can modify your config.xml to point to (fox example):<br>&lt;content src=http://192.168.1.1:8000/ios/www/index.html /&gt;</p> <p>I also needed to create a task, using Gulp, to copy changes I made in my repository working files to the ios output directory.&nbsp; With that done, every change I would make on my development machine would reflect on the iPad and make for a really nice testing experience.</p>
